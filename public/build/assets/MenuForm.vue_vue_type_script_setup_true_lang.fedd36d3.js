import{d as me,e as c,u as p,r as _,f as D,V as m,i as de,m as _e,j as fe,E as ve,av as be,aw as ye,p as ge,ax as Ve,s as ke,k as Ee,v as we,q as Fe,x as $e,y as d,z as n,A as Ce,B as u,C as s,D as a,L as v,I as E,J as O,K as L,F as w,G as F,U as Ne,N as Ue,W as P,O as R}from"./app.9932dd05.js";/* empty css                     *//* empty css                       *//* empty css                    */const Se=me({__name:"MenuForm",setup(Te){var x,A,h;const $=c(()=>p().props.value.langs),C=c(()=>p().props.value.menu),b=c(()=>p().props.value.menu_id),j=c(()=>p().props.value.menu_name),K=c(()=>p().props.value.articles),W=c(()=>p().props.value.menuType),N=p().props.value.categories,U=_(N),z=l=>{U.value=[...N].filter(t=>t.label.includes(l))},T="km",q=_(T);Ce();const I=route().current(),G=_("top"),y=_();let f={is_active:!0,parent:(x=b.value)!=null?x:"",parentName:(A=j.value)!=null?A:"",article:null,menuType:(h=W.value)!=null?h:"",category:null,order:0};$.value.forEach(l=>{let t="name_"+l.locale,r="description_"+l.locale;f[t]="",f[r]=""});const J=(l,t)=>{console.log(l,t)},B=c(()=>I==="menu.edit"),M=c(()=>I==="menu.create"),g=_([]);B.value&&(f=D(C.value),g.value=K.value);const o=D(f),S=m("app.please_input_category_name"),H=de({name_en:[{required:!0,message:S,trigger:"blur"}],name_km:[{required:!0,message:S,trigger:"blur"}]}),Q=()=>{R({title:m("app.success"),message:m("app.create_menu_success"),type:"success"})},X=async l=>{!l||await l.validate((t,r)=>{t?o.post(route("menu.store"),{onFinish:Q()}):console.log("error submit!",r)})},Y=()=>{R({title:m("app.success"),message:m("app.update_menu_success"),type:"success"})},Z=async l=>{!l||await l.validate((t,r)=>{t?o.post(route("menu.update",{menu:b.value}),{onFinish:Y()}):console.log("error submit!",r)})},ee=l=>T===l,le=()=>{Ne.confirm(m("app.confirm_delete_message"),"Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(()=>{Ue.Inertia.visit(route("menu.destroy",{menu:b.value})),P({type:"success",message:"Delete completed"})}).catch(()=>{P({type:"info",message:"Delete canceled"})})},te=async()=>{await axios.get(route("article.get_article_by_category",o.category)).then(l=>{o.article=null,g.value=l.data.articles})};return(l,t)=>{const r=_e,i=fe,ae=ve,oe=be,se=ye,ne=ge,re=Ve,ue=ke,V=Ee,ce=we,pe=Fe,ie=$e;return u(),d(ie,{modelValue:q.value,"onUpdate:modelValue":t[8]||(t[8]=e=>q.value=e),class:"category-tabs",onTabClick:J},{default:n(()=>[s(pe,{model:a(o),"label-position":G.value,rules:H,ref_key:"categoryForm",ref:y,"label-width":"120px","require-asterisk-position":"right"},{default:n(()=>[a(M)&&a(o).parentName?(u(),d(i,{key:0,label:l.$t("app.parent")},{default:n(()=>[s(r,{modelValue:a(o).parentName,"onUpdate:modelValue":t[0]||(t[0]=e=>a(o).parentName=e),disabled:!0},null,8,["modelValue"])]),_:1},8,["label"])):v("",!0),s(i,{label:l.$t("app.select_category"),prop:"category"},{default:n(()=>[s(ae,{modelValue:a(o).category,"onUpdate:modelValue":t[1]||(t[1]=e=>a(o).category=e),data:U.value,"filter-method":z,"render-after-expand":!1,placeholder:l.$t("app.select_category"),"check-strictly":"",class:"w-full",filterable:"",clearable:"",onChange:te},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),s(i,{label:l.$t("app.select_article"),prop:"article"},{default:n(()=>[s(se,{modelValue:a(o).article,"onUpdate:modelValue":t[2]||(t[2]=e=>a(o).article=e),placeholder:l.$t("app.select_article"),clearable:"",filterable:"",class:"w-full"},{default:n(()=>[(u(!0),E(L,null,O(g.value,e=>(u(),d(oe,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),(u(!0),E(L,null,O(a($),e=>(u(),E("div",null,[s(ne,{label:e.name,name:e.locale},{default:n(()=>[s(i,{label:l.$t("app.name_"+e.locale),required:ee(e.locale),prop:"name_"+e.locale},{default:n(()=>[s(r,{modelValue:a(o)["name_"+e.locale],"onUpdate:modelValue":k=>a(o)["name_"+e.locale]=k},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","required","prop"]),s(i,{label:l.$t("app.description_"+e.locale)},{default:n(()=>[s(r,{rows:2,required:"",type:"textarea",modelValue:a(o)["description_"+e.locale],"onUpdate:modelValue":k=>a(o)["description_"+e.locale]=k},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1032,["label","name"])]))),256)),s(i,{label:l.$t("app.order")},{default:n(()=>[s(re,{modelValue:a(o).order,"onUpdate:modelValue":t[3]||(t[3]=e=>a(o).order=e),min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),s(ce,null,{default:n(()=>[s(ue,{modelValue:a(o).is_active,"onUpdate:modelValue":t[4]||(t[4]=e=>a(o).is_active=e),"active-text":"Active","inactive-text":"InActive",class:"mr-2"},null,8,["modelValue"]),a(M)?(u(),d(V,{key:0,type:"success",plain:"",class:"me-2",onClick:t[5]||(t[5]=e=>X(y.value))},{default:n(()=>[w(F(l.$t("app.save")),1)]),_:1})):v("",!0),a(B)?(u(),d(V,{key:1,type:"success",plain:"",class:"me-2",onClick:t[6]||(t[6]=e=>Z(y.value))},{default:n(()=>[w(F(l.$t("app.update")),1)]),_:1})):v("",!0),a(C)!=null?(u(),d(V,{key:2,type:"danger",plain:"",class:"me-2",onClick:t[7]||(t[7]=e=>le())},{default:n(()=>[w(F(l.$t("app.delete")),1)]),_:1})):v("",!0)]),_:1})]),_:1},8,["model","label-position","rules"])]),_:1},8,["modelValue"])}}});export{Se as _};
