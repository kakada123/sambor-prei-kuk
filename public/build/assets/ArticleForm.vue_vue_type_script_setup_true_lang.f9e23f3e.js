import{w as z,d as ee,t as fe,r as h,o as ve,a as pe,b as ge,c as ye,h as $,n as H,e as D,u as L,f as G,g as M,i as _e,E as be,j as he,k as Ce,l as Se,m as we,p as Ee,q as Ve,s as Be,v as Fe,x as Ie,y as N,z as v,A as Ue,B as k,C as p,D as g,F as q,G as P,H as ke,I as J,J as Ae,K as De,L as W,M as Me,N as Q,O as Pe}from"./app.9ecc61f7.js";/* empty css                     *//* empty css                       *//* empty css                    */var je=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Oe=function(e){return je.map(function(n){return n.toLowerCase()}).indexOf(e.toLowerCase())!==-1},Re=function(e,n,t){Object.keys(n).filter(Oe).forEach(function(u){var r=n[u];typeof r=="function"&&(u==="onInit"?r(e,t):t.on(u.substring(2),function(c){return r(c,t)}))})},Te=function(e,n,t,u){var r=e.modelEvents?e.modelEvents:null,c=Array.isArray(r)?r.join(" "):r;z(u,function(f,d){t&&typeof f=="string"&&f!==d&&f!==t.getContent({format:e.outputFormat})&&t.setContent(f)}),t.on(c||"change input undo redo",function(){n.emit("update:modelValue",t.getContent({format:e.outputFormat}))})},Le=function(e,n,t,u,r,c){u.setContent(c()),t.attrs["onUpdate:modelValue"]&&Te(n,t,u,r),Re(e,t.attrs,u)},X=0,te=function(e){var n=Date.now(),t=Math.floor(Math.random()*1e9);return X++,e+"_"+t+X+String(n)},Ne=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},Y=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},qe=function(e,n){return Y(e).concat(Y(n))},ze=function(e){return e==null},Z=function(){return{listeners:[],scriptId:te("tiny-script"),scriptLoaded:!1}},xe=function(){var e=Z(),n=function(r,c,f,d){var i=c.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=r,i.src=f;var b=function(){i.removeEventListener("load",b),d()};i.addEventListener("load",b),c.head&&c.head.appendChild(i)},t=function(r,c,f){e.scriptLoaded?f():(e.listeners.push(f),r.getElementById(e.scriptId)||n(e.scriptId,r,c,function(){e.listeners.forEach(function(d){return d()}),e.scriptLoaded=!0}))},u=function(){e=Z()};return{load:t,reinitialize:u}},Ke=xe(),$e=function(){return typeof window<"u"?window:global},E=function(){var e=$e();return e&&e.tinymce?e.tinymce:null},He={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},V=globalThis&&globalThis.__assign||function(){return V=Object.assign||function(e){for(var n,t=1,u=arguments.length;t<u;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)},Ge=function(e,n,t,u){return e(u||"div",{id:n,ref:t})},Je=function(e,n,t){return e("textarea",{id:n,visibility:"hidden",ref:t})},We=ee({props:He,setup:function(e,n){var t=e.init?V({},e.init):{},u=fe(e),r=u.disabled,c=u.modelValue,f=u.tagName,d=h(null),i=null,b=e.id||te("tiny-vue"),B=e.init&&e.init.inline||e.inline,F=!!n.attrs["onUpdate:modelValue"],U=!0,A=e.initialValue?e.initialValue:"",C="",j=function(m){return F?function(){return c!=null&&c.value?c.value:""}:function(){return m?A:C}},y=function(){var m=j(U),o=V(V({},t),{readonly:e.disabled,selector:"#"+b,plugins:qe(t.plugins,e.plugins),toolbar:e.toolbar||t.toolbar,inline:B,setup:function(_){i=_,_.on("init",function(O){return Le(O,e,n,_,c,m)}),typeof t.setup=="function"&&t.setup(_)}});Ne(d.value)&&(d.value.style.visibility=""),E().init(o),U=!1};z(r,function(m){var o;i!==null&&(typeof((o=i.mode)===null||o===void 0?void 0:o.set)=="function"?i.mode.set(m?"readonly":"design"):i.setMode(m?"readonly":"design"))}),z(f,function(m){var o;F||(C=i.getContent()),(o=E())===null||o===void 0||o.remove(i),H(function(){return y()})}),ve(function(){if(E()!==null)y();else if(d.value&&d.value.ownerDocument){var m=e.cloudChannel?e.cloudChannel:"5",o=e.apiKey?e.apiKey:"no-api-key",_=ze(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+o+"/tinymce/"+m+"/tinymce.min.js":e.tinymceScriptSrc;Ke.load(d.value.ownerDocument,_,y)}}),pe(function(){E()!==null&&E().remove(i)}),B||(ge(function(){U||y()}),ye(function(){var m;F||(C=i.getContent()),(m=E())===null||m===void 0||m.remove(i)}));var S=function(m){var o;C=i.getContent(),(o=E())===null||o===void 0||o.remove(i),t=V(V({},t),m),H(function(){return y()})};return n.expose({rerender:S}),function(){return B?Ge($,b,d,e.tagName):Je($,b,d)}}});const Qe={class:"el-upload__tip"},tt=ee({__name:"ArticleForm",props:{categories:Object,status:Number},setup(e){const n=D(()=>L().props.value.langs),t=D(()=>L().props.value.article),u=route().current(),r=D(()=>u==="article.edit"),c=D(()=>u==="article.create");let f=[];r.value&&t.value.thumbnail&&(f=[{name:t.value.thumbnail,url:t.value.thumbnail}]);const d=h(f),i=h(),b=a=>{i.value.clearFiles();const l=a[0];l.uid=Me(),i.value.handleStart(l)},B=L().props.value.categories,F=h(B),U=a=>{F.value=[...B].filter(l=>l.label.includes(a))},A="km",C=h(A);Ue();const j=h("top"),y=h();let S={category:"",is_active:!0};n.value.forEach(a=>{let l="name_"+a.locale,w="description_"+a.locale,I="content_"+a.locale;S[l]="",S[w]="",S[I]=""});const m=(a,l)=>{console.log(a,l)};r.value&&(S=G(t.value));const o=G(S),_=M("app.please_input_article_name"),O=_e({category:[{required:!0,message:M("app.please_select_category"),trigger:"change"}],name_en:[{required:!0,message:_,trigger:"blur"}],name_km:[{required:!0,message:_,trigger:"blur"}]}),x=()=>{Pe({title:M("app.success"),message:M("app.create_article_success"),type:"success"})},ne=async a=>{!a||await a.validate((l,w)=>{l?Q.Inertia.post(route("article.store"),{_method:"post",forceFormData:!0,form:o,thumbnail:d.value[0]?d.value[0].raw:null,preserveScroll:!0},{onSuccess:x()}):console.log("error submit!",w)})},K=h(!1),ae=(a,l)=>{K.value=!0},oe=async a=>{!a||await a.validate((l,w)=>{l?Q.Inertia.post(route("article.update",{article:t.value.id}),{_method:"post",forceFormData:!0,form:o,isRemoveImage:K.value,thumbnail:d.value[0]?d.value[0].raw:null,preserveScroll:!0},{onSuccess:x()}):console.log("error submit!",w)})},le=a=>A===a;return(a,l)=>{const w=be,I=he,R=Ce,re=Se,ie=we,ue=Ee,se=Ve,ce=Be,de=Fe,me=Ie;return k(),N(me,{modelValue:C.value,"onUpdate:modelValue":l[5]||(l[5]=s=>C.value=s),class:"category-tabs",onTabClick:m},{default:v(()=>[p(se,{model:g(o),"label-position":j.value,rules:O,ref_key:"articleForm",ref:y,"label-width":"120px","require-asterisk-position":"right"},{default:v(()=>[p(I,{label:a.$t("app.select_category"),required:!0,prop:"category"},{default:v(()=>[p(w,{modelValue:g(o).category,"onUpdate:modelValue":l[0]||(l[0]=s=>g(o).category=s),data:F.value,"filter-method":U,"render-after-expand":!1,placeholder:a.$t("app.select_category"),"check-strictly":"",class:"w-full",filterable:""},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),p(I,{label:a.$t("app.thumbnail")},{default:v(()=>[p(re,{ref_key:"upload",ref:i,class:"upload-demo","auto-upload":!1,limit:1,"on-exceed":b,"on-remove":ae,"file-list":d.value,"onUpdate:file-list":l[1]||(l[1]=s=>d.value=s),"list-type":"picture"},{trigger:v(()=>[p(R,{type:"primary"},{default:v(()=>[q(P(a.$t("app.select_thumbnail")),1)]),_:1})]),tip:v(()=>[ke("div",Qe,P(a.$t("app.upload_file_help_text")),1)]),_:1},8,["file-list"])]),_:1},8,["label"]),(k(!0),J(De,null,Ae(g(n),s=>(k(),J("div",null,[p(ue,{label:s.name,name:s.locale},{default:v(()=>[p(I,{label:a.$t("app.name_"+s.locale),required:le(s.locale),prop:"name_"+s.locale},{default:v(()=>[p(ie,{modelValue:g(o)["name_"+s.locale],"onUpdate:modelValue":T=>g(o)["name_"+s.locale]=T},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","required","prop"]),p(I,{label:a.$t("app.content_"+s.locale)},{default:v(()=>[p(g(We),{id:"content_"+s.locale,modelValue:g(o)["content_"+s.locale],"onUpdate:modelValue":T=>g(o)["content_"+s.locale]=T,"api-key":"x619dz9pzucdv88t6igpqjx22aaalqx2z9znr1y6tzlof0bp",init:{plugins:"lists link image table code help wordcount fullscreen",min_height:500,width:"100%",toolbar:"undo redo | code | forecolor backcolor | styleselect | fontselect | fontsizeselect| bold italic | alignleft aligncenter alignright alignjustify | outdent indent fullscreen image",image_title:!0,automatic_uploads:!0,images_upload_url:"/articles/upload-image",content_style:"@import url('https://fonts.googleapis.com/css2?family=Hanuman&family=Kantumruy:wght@300;400;700&family=Koulen&family=Moul&family=Roboto:ital,wght@0,400;1,700&display=swap&family=Siemreap&display=swap');body { font-family: ; 'Hanuman'}",font_formats:"\u17A0\u1793\u17BB\u1798\u17B6\u1793=Hanuman;Roboto=Roboto;\u1798\u17C9\u17BC\u179B=Moul;\u1782\u17BC\u179B\u17C1\u1793=Koulen;\u179F\u17C0\u1798\u179A\u17B6\u1794=Siemreap;"}},null,8,["id","modelValue","onUpdate:modelValue","init"])]),_:2},1032,["label"])]),_:2},1032,["label","name"])]))),256))]),_:1},8,["model","label-position","rules"]),p(de,{class:"justify-end"},{default:v(()=>[p(ce,{modelValue:g(o).is_active,"onUpdate:modelValue":l[2]||(l[2]=s=>g(o).is_active=s),"active-text":"Active","inactive-text":"InActive",class:"mr-2"},null,8,["modelValue"]),g(c)?(k(),N(R,{key:0,type:"success",plain:"",class:"me-2",onClick:l[3]||(l[3]=s=>ne(y.value))},{default:v(()=>[q(P(a.$t("app.save")),1)]),_:1})):W("",!0),g(r)?(k(),N(R,{key:1,type:"success",plain:"",class:"me-2",onClick:l[4]||(l[4]=s=>oe(y.value))},{default:v(()=>[q(P(a.$t("app.update")),1)]),_:1})):W("",!0)]),_:1})]),_:1},8,["modelValue"])}}});export{tt as _};
